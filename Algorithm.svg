<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="210mm"
   height="297mm"
   viewBox="0 0 744.09448819 1052.3622047"
   id="svg2"
   version="1.1"
   inkscape:version="0.91 r13725"
   sodipodi:docname="Algorithm.svg">
  <defs
     id="defs4" />
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="1.4"
     inkscape:cx="321.84948"
     inkscape:cy="1021.1333"
     inkscape:document-units="px"
     inkscape:current-layer="layer1"
     showgrid="false"
     showguides="true"
     inkscape:guide-bbox="true"
     inkscape:snap-global="true"
     inkscape:snap-bbox="true"
     inkscape:bbox-paths="false"
     inkscape:snap-text-baseline="true"
     inkscape:window-width="1920"
     inkscape:window-height="1148"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1">
    <sodipodi:guide
       position="37.142857,1014.2857"
       orientation="1,0"
       id="guide4200" />
    <sodipodi:guide
       position="84.285715,1014.2857"
       orientation="0,1"
       id="guide4359" />
    <sodipodi:guide
       position="437.14286,1052.8572"
       orientation="1,0"
       id="guide4361" />
  </sodipodi:namedview>
  <metadata
     id="metadata7">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title />
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Layer 1"
     inkscape:groupmode="layer"
     id="layer1">
    <text
       xml:space="preserve"
       style="font-style:normal;font-weight:normal;font-size:22.5px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       x="437.14285"
       y="360.21933"
       id="text4136"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan4138"
         x="437.14285"
         y="360.21933"
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#008000">Receive from PC</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="378.96933"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria"
         id="tspan4158">If invalid -&gt; <tspan
   style="font-size:15px;fill:#000080"
   id="tspan4345">return error to pc</tspan></tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="397.71933"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria"
         id="tspan4160">If Set Voltage -&gt; <tspan
   style="font-weight:bold;fill:#800000"
   id="tspan4185">Set Voltage</tspan></tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="416.46933"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria"
         id="tspan4187">If Get set voltage -&gt; <tspan
   style="font-weight:bold;fill:#800000"
   id="tspan4189">Get Set Voltage</tspan></tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="435.21933"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria"
         id="tspan4202">If Get actual voltage -&gt; <tspan
   style="font-weight:bold;fill:#800000"
   id="tspan4193">Get Actual Voltage</tspan></tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="453.96933"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria"
         id="tspan4195">If Get current -&gt; <tspan
   style="font-weight:bold;fill:#800000"
   id="tspan4197">Get Current</tspan></tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="472.71933"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria"
         id="tspan4191" /></text>
    <text
       xml:space="preserve"
       style="font-style:normal;font-weight:normal;font-size:22.5px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       x="437.14285"
       y="194.31693"
       id="text4136-9"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan4138-9"
         x="437.14285"
         y="194.31693"
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;font-size:15px">Valid commands from PC</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="222.44191"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;font-size:15px"
         id="tspan4162">1. Set Voltage</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="250.56691"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;font-size:15px"
         id="tspan4164">2. Get set voltage</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="278.69189"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;font-size:15px"
         id="tspan4166">3. Get actual voltage from ADC</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="306.81689"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;font-size:15px"
         id="tspan4168">4. Get current</tspan></text>
    <text
       xml:space="preserve"
       style="font-style:normal;font-weight:normal;font-size:22.5px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       x="37.142857"
       y="323.91248"
       id="text4136-9-7"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         x="37.142857"
         y="323.91248"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#800000"
         id="tspan4168-7">1. Set voltage on module</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="342.66248"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#808000"
         id="tspan4248">2. Update LCD</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="361.41248"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria"
         id="tspan4250">3. Get actual</tspan></text>
    <text
       xml:space="preserve"
       style="font-style:normal;font-weight:normal;font-size:22.5px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       x="37.142857"
       y="210.21938"
       id="text4252"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan4254"
         x="37.142857"
         y="210.21938"
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria">Main loop</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="228.96938"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria"
         id="tspan4347">Every 50ms</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="247.71938"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#008000"
         id="tspan4256">    Listen to pc</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="266.46936"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria"
         id="tspan4258"><tspan
   style="font-size:15px;fill:#008000"
   id="tspan4351">    If message</tspan> -&gt; <tspan
   style="font-weight:bold;font-size:15px;fill:#008000"
   id="tspan4260">Receive from PC</tspan></tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="285.21936"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#808000"
         id="tspan4349">    Listen to FP</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="303.96936"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#808000"
         id="tspan4355">    If fp change -&gt; FP change</tspan></text>
    <text
       xml:space="preserve"
       style="font-style:normal;font-weight:normal;font-size:22.5px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       x="37.142857"
       y="38.076527"
       id="text4136-9-4"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         x="37.142857"
         y="38.076527"
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;font-size:15px"
         id="tspan4168-1">Setup loop</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="66.201523"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#800000;font-size:15px"
         id="tspan4292">1a. Get set voltages from modules</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="94.326523"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#808000;font-size:15px"
         id="tspan4298">1b. Update front panel with set voltages</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="122.45152"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000080;font-size:15px"
         id="tspan4302">1c. Update PC with set voltages</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="150.57652"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#800000;font-size:15px"
         id="tspan4300">2a. Get actual voltages</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="178.70152"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000080;font-size:15px"
         id="tspan4294">2b. Update PC with actual voltages</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="206.82652"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#800000;font-size:15px"
         id="tspan4296">3a. Get currents from modules</tspan><tspan
         sodipodi:role="line"
         x="37.142857"
         y="234.95152"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000080;font-size:15px"
         id="tspan4304">3b. Update PC with actual voltages</tspan></text>
    <text
       xml:space="preserve"
       style="font-style:normal;font-weight:normal;font-size:22.5px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       x="437.14285"
       y="38.076527"
       id="text4136-9-0"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         id="tspan4138-9-2"
         x="437.14285"
         y="38.076527"
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;font-size:15px">Key</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="66.201523"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#800000;font-size:15px"
         id="tspan4162-1">1. Communicate with modules</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="94.32653"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#008000;font-size:15px"
         id="tspan4164-5">2. Receive from PC</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="122.45153"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000080;font-size:15px"
         id="tspan4168-5">3. Send to PC</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="150.57654"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#808000;font-size:15px"
         id="tspan4343">4. Front panel (FP)</tspan></text>
    <text
       xml:space="preserve"
       style="font-style:normal;font-weight:normal;font-size:22.5px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       x="437.14285"
       y="498.63382"
       id="text4136-9-5"
       sodipodi:linespacing="125%"><tspan
         sodipodi:role="line"
         x="437.14285"
         y="498.63382"
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4243">FP change</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="517.38379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4249">If controlMode == FP only</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="536.13379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4263">    Enable interrupts</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="554.88379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4253">    Discard all serial inputs from PC</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="573.63379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4255">If controlMode == mixed</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="592.38379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4265">    Enable interrupts</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="611.13379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4257">    Listen for serial and FP</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="629.88379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4259">If controlMode == PC</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="648.63379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4261">    Disable interrupts</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="667.38379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4267">    Listen for serial from PC</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="686.13379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4269">If dialSetting == 0.1</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="704.88379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4281">    Set voltage step to 0.1</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="723.63379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4283">If dialSetting == 1</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="742.38379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4285">    Set voltage step to 1</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="761.13379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4287">If dialSetting == 10</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="779.88379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4289">    Set voltage step to 10</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="798.63379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4279">If encoder position changed</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="817.38379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4271">    Update set voltage array</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="836.13379"
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#800000"
         id="tspan4273">    Set Voltage</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="854.88379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000080"
         id="tspan4275">    Update pc with serial message</tspan><tspan
         sodipodi:role="line"
         x="437.14285"
         y="873.63379"
         style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:15px;font-family:Cambria;-inkscape-font-specification:Cambria;fill:#000000"
         id="tspan4277">    </tspan></text>
  </g>
</svg>
